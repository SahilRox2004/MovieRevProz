<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>THE GOOD, THE BAD & THE VERTIGO</title>
  <style>
    #main-content {
      display: none;
      padding: 20px;
      color: white;
      text-align: center;
      width: 100%;
      margin: 0 auto;
    }
    
    .intro {
      position: relative;
      top:200px;
      width: 600px;
      height: 300px;
      display: flex;
      justify-content: center;
      align-items: center;
      color: #fff;
      font-size: 5em;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-shadow: 0 0 10px #00b3ff, 0 0 20px #00b3ff, 0 0 40px #00b3ff,
          0 0 80px #00b3ff, 0 0 120px #00b3ff;
      margin: 100px auto;
    }

    .lightbar {
      position: absolute;
      top: -16%;
      left: 0;
      width: 10px;
      height: 140%;
      border-radius: 10px;
      background: #fff;
      z-index: 2;
      box-shadow: 0 0 10px #00b3ff, 0 0 20px #00b3ff, 0 0 40px #00b3ff,
          0 0 80px #00b3ff, 0 0 120px #00b3ff;
      animation: animateLightbar 5s linear infinite;
    }

    @keyframes animateLightbar {
      0% {
        transform: scaleY(0) translateX(0);
      }
      10% {
        transform: scaleY(1) translateX(0);
      }
      90% {
        transform: scaleY(1) translateX(calc(600px - 10px));
      }
      95% {
        transform: scaleY(1) translateX(calc(600px - 10px));
      }
      100% {
        transform: scaleY(0) translateX(0);
      }
    }

    .toplayer {
      position: absolute;
      top: -40%;
      left: 0;
      width: 100%;
      height: 200%;
      background: #000;
      animation: animateTopLayer 10s linear infinite;
    }

    @keyframes animateTopLayer {
      0% {
        transform: translateX(0);
      }
      5% {
        transform: translateX(0);
      }
      45% {
        transform: translateX(100%);
      }
      47.5%,
      50% {
        transform: translateX(100%);
      }
      50.0001%,
      52.5% {
        transform: translateX(-100%);
      }
      55% {
        transform: translateX(-100%);
      }
      95% {
        transform: translateX(0);
      }
      97.5%,
      100% {
        transform: translateX(0);
      }
    }

    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: black;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }
    
    .header {
      display: flex;
      justify-content: space-around;
      align-items: center;
      background-color: #181818;
      padding: 20px;
      width: 100%;
    }
    
    .title {
      font-size: 28px;
    }
    
    #search {
      padding: 8px;
      font-size: 16px;
      border-radius: 4px;
      border: none;
    }
    #search-button {
      padding: 8px 16px;
      font-size: 16px;
      border: none;
      background-color: yellow;
      color: black;
      border-radius: 4px;
      cursor: pointer;
      margin-left: 10px;
      transition: background-color 0.3s ease, transform 0.3s ease;
    }

    #search-button:hover {
      background-color: red;
      color: white;
      transform: scale(1.1);
    }
    
    section {
      padding: 20px;
      
    }
    
    .section-heading {
      text-align: left;
      margin-left: 20px;
      color: #fff;
      font-size: 24px;
      border-left: 4px solid #ff3333;
      padding-left: 10px;
    }
    
    #movies-container, #search-movies-container, .category-container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }
    
    .movie-card {
      width: 180px;
      cursor: pointer;
      transition: transform 0.3s ease;
      margin-bottom: 15px;
    }
    
    .movie-card:hover {
      transform: scale(1.05);
    }
    
    .movie-card img {
      width: 100%;
      height: 270px;
      border-radius: 8px;
      object-fit: cover;
    }
    
    .carousel-container {
      position: relative;
      display: flex;
      align-items: center;
      overflow: hidden;
      padding: 10px;
      width: 100%;
    }
    
    .carousel {
      display: flex;
      gap: 10px;
      overflow-x: auto;
      scroll-behavior: smooth;
      padding-top: 20px;
      padding-bottom: 20px;
      width: 100vw;
    }
    
    .carousel::-webkit-scrollbar {
      display: none;
    }

    .category-carousel .movie-card img,
.filmography-container .movie-card img {
  width: 100%;
  height: 270px;
  border-radius: 8px;
  object-fit: cover;
}

.category-carousel .movie-card,
.filmography-container .movie-card {
  width: 180px;
  min-width: 180px;
}
    
    .movie-card h3 {
      font-size: 16px;
      margin: 8px 0;
      text-align: center;
      box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.904);
    }
    
    #movie-details img {
      width: 100%;
      max-width: 300px;
      border-radius: 10px;
    }
    
    #prevBtn, #nextBtn, .prev-btn, .next-btn {
      position: absolute;
      z-index: 999;
      background-color: rgba(0, 0, 0, 0.7);
      color: white;
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      font-size: 18px;
    }
    
    #prevBtn, .prev-btn {
      left: 10px;
    }

    #nextBtn, .next-btn {
      right: 10px;
    }
    
    .design {
      width: 100vw;
      height: 500px;
      margin: 0 10px;
      object-fit: cover;
    }
    
    button {
      padding: 10px 20px;
      margin: 20px;
      background-color: #333;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    
    button:hover {
      background-color: #555;
    }

    #intro-instructions {
      color: #fff;
      text-align: center;
      font-size: 18px;
      margin-top: 20px;
      animation: blink 1.5s infinite;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.3; }
    }

    #details-content {
      background-color: rgba(0, 0, 0, 0.7);
      padding: 20px;
      border-radius: 10px;
      max-width: 800px;
      margin: 0 auto;
    }
    
    .category-section {
      margin-bottom: 40px;
      position: relative;
      overflow: hidden;
    }
    
    .category-carousel {
      display: flex;
      gap: 15px;
      overflow-x: auto;
      scroll-behavior: smooth;
      padding: 20px 0;
      scrollbar-width: none;
    }
    
    .category-carousel::-webkit-scrollbar {
      display: none;
    }
    
    .section-divider {
      height: 2px;
      background: linear-gradient(90deg, transparent, #ff3333, transparent);
      margin: 40px 0;
      width: 80%;
    }

    
    .cast-container {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: center;
      margin-top: 20px;
    }
    
    .cast-member {
      width: 120px;
      text-align: center;
      margin-bottom: 15px;
    }
    
    .cast-member img {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
    }
    
    .cast-name {
      font-weight: bold;
      margin: 5px 0 0 0;
    }
    
    .cast-character {
      font-size: 0.9em;
      opacity: 0.8;
      margin: 0;
    }

    .crew-container {
      margin-top: 20px;
      text-align: left;
    }

    .crew-title {
      text-align: center;
      margin-bottom: 15px;
      color: #ff3333;
    }

    .crew-member {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }

    .crew-member img {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      margin-right: 15px;
      object-fit: cover;
    }

    .crew-info {
      flex: 1;
    }

    .crew-name {
      font-weight: bold;
      margin: 0;
    }

    .crew-job {
      font-size: 0.9em;
      opacity: 0.8;
      margin: 0;
    }

    .details-section {
      margin-bottom: 30px;
    }

    .details-flex {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      align-items: flex-start;
    }

    .poster-container {
      flex: 0 0 300px;
    }

    .info-container {
      flex: 1;
      min-width: 300px;
      text-align: left;
    }
    .filmography-section {
  margin-top: 30px;
}

.filmography-section h3 {
  border-left: 4px solid #ff3333;
  padding-left: 10px;
  margin-bottom: 20px;
}

.filmography-container {
  display: flex;
  overflow-x: auto;
  gap: 15px;
  padding: 10px 0;
  scroll-behavior: smooth;
}

.role-year {
  font-size: 0.8em;
  color: #aaa;
  margin-top: 5px;
}


.cast-member, .crew-member {
  transition: transform 0.2s;
}

.cast-member:hover, .crew-member:hover {
  transform: scale(1.05);
  box-shadow: 0 0 10px rgba(255, 51, 51, 0.5);
  border-radius: 10px;
  background-color: rgba(0, 0, 0, 0.5);
}

/* Authentication Modal Styles */
.auth-modal {
  display: none;
  position: fixed;
  z-index: 9999;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.8);
  overflow: auto;
}

.auth-content {
  background-color: #181818;
  margin: 15% auto;
  padding: 30px;
  width: 80%;
  max-width: 500px;
  border-radius: 8px;
  box-shadow: 0 0 20px rgba(255, 51, 51, 0.3);
  position: relative;
  animation: modalFade 0.4s;
  color: white;
}

@keyframes modalFade {
  from {opacity: 0; transform: translateY(-30px);}
  to {opacity: 1; transform: translateY(0);}
}

.close-btn {
  color: #aaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
  cursor: pointer;
  transition: color 0.3s;
}

.close-btn:hover {
  color: #ff3333;
}

.form-group {
  margin-bottom: 20px;
}

.form-group label {
  display: block;
  margin-bottom: 8px;
  color: #ddd;
}

.form-group input {
  width: 100%;
  padding: 12px;
  border: 1px solid #333;
  border-radius: 4px;
  background-color: #222;
  color: white;
  font-size: 16px;
}

.auth-btn {
  width: 100%;
  padding: 12px;
  background: linear-gradient(90deg, #ff3333, #ff5722);
  color: white;
  border: none;
  border-radius: 4px;
  font-size: 16px;
  cursor: pointer;
  transition: transform 0.3s, box-shadow 0.3s;
}

.auth-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(255, 51, 51, 0.4);
}

.auth-content p {
  margin-top: 20px;
  text-align: center;
}

.auth-content a {
  color: #ff3333;
  text-decoration: none;
  transition: color 0.3s;
}

.auth-content a:hover {
  color: #ff5722;
  text-decoration: underline;
}

.user-profile {
  display: flex;
  align-items: center;
  cursor: pointer;
}

.user-avatar {
  width: 35px;
  height: 35px;
  border-radius: 50%;
  background-color: #ff3333;
  color: white;
  display: flex;
  justify-content: center;
  align-items: center;
  font-weight: bold;
  margin-right: 10px;
}

.dropdown-content {
  display: none;
  position: absolute;
  right: 10px;
  top: 60px;
  background-color: #181818;
  min-width: 160px;
  box-shadow: 0 8px 16px rgba(0,0,0,0.2);
  z-index: 1;
  border-radius: 4px;
}

.dropdown-content a {
  color: white;
  padding: 12px 16px;
  text-decoration: none;
  display: block;
  transition: background-color 0.3s;
}

.dropdown-content a:hover {
  background-color: #333;
}

.show {
  display: block;
}

.validation-error {
  color: #ff3333;
  font-size: 14px;
  margin-top: 5px;
}

/* Favorites Button Styling */
.movie-card {
  position: relative;
}

.favorite-btn {
  transition: transform 0.2s ease;
}

.favorite-btn:hover {
  transform: scale(1.2);
}

/* Reviews Section Styling */
.reviews-section {
  padding: 20px;
  background-color: rgba(0, 0, 0, 0.5);
  border-radius: 8px;
  margin-top: 20px;
}

.star-rating {
  font-size: 24px;
  color: #ffc107;
  margin-bottom: 10px;
}

.star {
  cursor: pointer;
  transition: transform 0.2s;
}

.star:hover {
  transform: scale(1.2);
}

.rating-value {
  margin-left: 10px;
  font-size: 18px;
}

textarea#review-text {
  width: 100%;
  min-height: 100px;
  padding: 10px;
  margin-bottom: 10px;
  background-color: #333;
  color: white;
  border: 1px solid #555;
  border-radius: 4px;
}

.reviews-container {
  max-height: 400px;
  overflow-y: auto;
  margin-top: 15px;
}

.review {
  background-color: rgba(30, 30, 30, 0.8);
  padding: 15px;
  border-radius: 6px;
  margin-bottom: 10px;
}

.review-header {
  display: flex;
  justify-content: space-between;
  margin-bottom: 10px;
  border-bottom: 1px solid #555;
  padding-bottom: 5px;
}

.reviewer-name {
  font-weight: bold;
}

.review-rating {
  color: #ffc107;
}

.review-date {
  color: #aaa;
  font-size: 0.9em;
}

.review-content {
  line-height: 1.5;
}

.delete-btn {
  background-color: #dc3545;
  color: white;
  border: none;
  padding: 8px 16px;
  border-radius: 4px;
  cursor: pointer;
  margin-left: 10px;
}

.delete-btn:hover {
  background-color: #bd2130;
}


.toast {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  background-color: rgba(0, 0, 0, 0.8);
  color: white;
  padding: 12px 20px;
  border-radius: 4px;
  z-index: 1000;
  opacity: 0;
  transition: opacity 0.3s;
}

.toast.show {
  opacity: 1;
}


.movies-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 20px;
  padding: 20px;
}

.fav-card-actions {
  position: absolute;
  top: 10px;
  right: 10px;
  z-index: 5;
}

.remove-fav {
  background-color: rgba(0, 0, 0, 0.7);
  color: white;
  border: none;
  border-radius: 50%;
  width: 30px;
  height: 30px;
  font-size: 18px;
  cursor: pointer;
  transition: background-color 0.3s;
}

.remove-fav:hover {
  background-color: #dc3545;
}
  </style>
</head>
<body>
  <div class="intro" id="intro">
    <div class="lightbar"></div>
    <div class="toplayer"></div>
    THE GOOD, THE BAD & THE VERTIGO
  </div>

  <div id="intro-instructions" style="position: absolute; bottom: 50px;">Press ENTER to continue</div>

  <div id="main-content">
    <div class="header">
      <h1 class="title">THE GOOD, THE BAD & THE VERTIGO</h1>
      <div style="display: flex; align-items: center;">
        <input type="text" id="search" placeholder="What's Hyping You...">
        <button id="search-button">üîç Search</button>
        <div id="auth-buttons" style="margin-left: 20px;">
          <button id="login-button" class="auth-btn" style="width: auto; padding: 8px 16px;">Login</button>
          <button id="signup-button" class="auth-btn" style="width: auto; padding: 8px 16px; margin-left: 10px;">Sign Up</button>
        </div>
        <div id="user-profile" class="user-profile" style="display: none; margin-left: 20px;">
          <div id="user-avatar" class="user-avatar">U</div>
          <span id="username">User</span>
          <div id="user-dropdown" class="dropdown-content">
            <a href="#" id="profile-link">Profile</a>
            <a href="#" id="favorites-link">Favorites</a>
            <a href="#" id="logout-link">Logout</a>
          </div>
        </div>
      </div>
    </div>
    
    <h2>HOTTEST FILMS RIGHT NOW</h2>
    <div class="carousel-container">
      <button id="prevBtn">‚ùÆ</button>
      <div id="movieCarousel" class="carousel"></div>
      <button id="nextBtn">‚ùØ</button>
    </div>
    
    <section id="main-banner">
      <h2 class="section-heading">Latest Movies</h2>
      <div id="movies-container"></div>
    </section>
    
    <div class="section-divider"></div>
    
   
    <section id="christmas-movies" class="category-section">
      <h2 class="section-heading">Best Christmas Movies</h2>
      <div class="carousel-container">
        <button class="prev-btn christmas-prev">‚ùÆ</button>
        <div id="christmas-movies-container" class="category-carousel"></div>
        <button class="next-btn christmas-next">‚ùØ</button>
      </div>
    </section>
    
    <div class="section-divider"></div>
    
    
<section id="action-movies" class="category-section">
  <h2 class="section-heading">Best Action Movies</h2>
  <div class="carousel-container">
    <button class="prev-btn action-prev">‚ùÆ</button>
    <div id="action-movies-container" class="category-carousel"></div>
    <button class="next-btn action-next">‚ùØ</button>
  </div>
</section>

<div class="section-divider"></div>


<section id="horror-movies" class="category-section">
  <h2 class="section-heading">Best Horror Movies</h2>
  <div class="carousel-container">
    <button class="prev-btn horror-prev">‚ùÆ</button>
    <div id="horror-movies-container" class="category-carousel"></div>
    <button class="next-btn horror-next">‚ùØ</button>
  </div>
</section>

<div class="section-divider"></div>
    
    
    <section id="romantic-movies" class="category-section">
      <h2 class="section-heading">Best Romantic Movies</h2>
      <div class="carousel-container">
        <button class="prev-btn romantic-prev">‚ùÆ</button>
        <div id="romantic-movies-container" class="category-carousel"></div>
        <button class="next-btn romantic-next">‚ùØ</button>
      </div>
    </section>
    
    <div class="section-divider"></div>
    
    
    <section id="bollywood-movies" class="category-section">
      <h2 class="section-heading">Best Bollywood Hits</h2>
      <div class="carousel-container">
        <button class="prev-btn bollywood-prev">‚ùÆ</button>
        <div id="bollywood-movies-container" class="category-carousel"></div>
        <button class="next-btn bollywood-next">‚ùØ</button>
      </div>
    </section>
  </div>

  <div id="search-results-page" style="display:none;">
    <button id="back-button">‚Üê Back</button>
    <h2>Search Results</h2>
    <div id="search-movies-container"></div>
  </div>

  <div id="movie-details" style="display:none; min-height: 100vh; width: 100%;">
    <button id="details-back-button">‚Üê Back</button>
    <div id="details-content"></div>
  </div>

  

  
<div id="login-modal" class="auth-modal">
  <div class="auth-content">
    <span class="close-btn">&times;</span>
    <h2>Login</h2>
    <form id="login-form">
      <div class="form-group">
        <label for="login-email">Email</label>
        <input type="email" id="login-email" required>
      </div>
      <div class="form-group">
        <label for="login-password">Password</label>
        <input type="password" id="login-password" required>
      </div>
      <button type="submit" class="auth-btn">Login</button>
    </form>
    <p>Don't have an account? <a href="#" id="show-signup">Sign up</a></p>
  </div>
</div>

<div id="signup-modal" class="auth-modal">
  <div class="auth-content">
    <span class="close-btn">&times;</span>
    <h2>Create Account</h2>
    <form id="signup-form">
      <div class="form-group">
        <label for="signup-name">Full Name</label>
        <input type="text" id="signup-name" required>
      </div>
      <div class="form-group">
        <label for="signup-email">Email</label>
        <input type="email" id="signup-email" required>
      </div>
      <div class="form-group">
        <label for="signup-password">Password</label>
        <input type="password" id="signup-password" required minlength="6">
      </div>
      <div class="form-group">
        <label for="signup-confirm">Confirm Password</label>
        <input type="password" id="signup-confirm" required>
      </div>
      <button type="submit" class="auth-btn">Sign Up</button>
    </form>
    <p>Already have an account? <a href="#" id="show-login">Login</a></p>
  </div>

  <div id="favorites-page" style="display:none; min-height: 100vh; width: 100%;">
    <button id="favorites-back-button">‚Üê Back</button>
    <div id="favorites-container"></div>
  </div>

</div>



  <script>
    const apiKey = 'e3f3c6bbaa28f44655ce122808717a76'; 
    const movieCarousel = document.getElementById('movieCarousel');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');

    function fetchAndDisplaySimilarMovies(movieId, container) {
  // Fetch similar movies from TMDb API
  fetch(`https://api.themoviedb.org/3/movie/${movieId}/similar?api_key=${apiKey}`)
    .then(response => response.json())
    .then(data => {
      const similarMovies = data.results.slice(0, 6); // Get top 6 similar movies
      
      if (similarMovies.length > 0) {
        const similarMoviesHTML = `
          <div class="details-section">
            <h3 class="crew-title">You May Also Like</h3>
            <div class="category-carousel">
              ${similarMovies.map(movie => `
                <div class="movie-card" onclick="showMovieDetails(${movie.id})">
                  <img src="${movie.poster_path ? `https://image.tmdb.org/t/p/w185${movie.poster_path}` : '/api/placeholder/185/278'}" alt="${movie.title}">
                  <h3>${movie.title}</h3>
                </div>
              `).join('')}
            </div>
          </div>
        `;
        container.insertAdjacentHTML('beforeend', similarMoviesHTML);
      }
    })
    .catch(error => {
      console.error('Error fetching similar movies:', error);
    });
}
    

    
if (!localStorage.getItem('reviews')) {
  localStorage.setItem('reviews', JSON.stringify({}));
}
    

    
    let ourMovie = [
      {
        name: "Superman",
        imgSrc: "/thumb-1920-1379856.jpg", 
        link: "https://www.youtube.com/watch?v=uhUht6vAsMY"
      },
      {
        name: "Fantastic Four: First Steps",
        imgSrc: "/thumb-1920-1351905.jpeg", 
        link: "https://youtu.be/pAsmrKyMqaA?si=DKsporyDIh0NFCuD"
      },
    ];

    function showPersonDetails(personId, personName) {
  fetch(`https://api.themoviedb.org/3/person/${personId}?api_key=${apiKey}`)
    .then(response => response.json())
    .then(person => {
      
      fetch(`https://api.themoviedb.org/3/person/${personId}/movie_credits?api_key=${apiKey}`)
        .then(response => response.json())
        .then(credits => {
          displayPersonDetailsWithFilmography(person, credits);
        })
        .catch(error => {
          console.error('Error fetching person filmography:', error);
          displayPersonDetailsWithFilmography(person, { cast: [], crew: [] });
        });
    })
    .catch(error => {
      console.error('Error fetching person details:', error);
      displayPlaceholderPersonDetails(personName);
    });
}

function displayPersonDetailsWithFilmography(person, credits) {
  document.getElementById('main-content').style.display = 'none';
  document.getElementById('search-results-page').style.display = 'none';
  document.getElementById('movie-details').style.display = 'block';

  const details = document.getElementById('details-content');
  const profileUrl = person.profile_path 
    ? `https://image.tmdb.org/t/p/w500${person.profile_path}` 
    : '/api/placeholder/400/600';
  
  
  const actingRoles = credits.cast ? [...credits.cast].sort((a, b) => 
    new Date(b.release_date || '1900') - new Date(a.release_date || '1900')
  ) : [];
  
  const directingRoles = credits.crew ? credits.crew
    .filter(job => job.job === "Director")
    .sort((a, b) => new Date(b.release_date || '1900') - new Date(a.release_date || '1900')) 
    : [];
  
  
  let filmographyHTML = '';
  
  if (actingRoles.length > 0) {
    filmographyHTML += `
      <div class="details-section">
        <h3 class="crew-title">Acting</h3>
        <div class="category-carousel" style="overflow-x: auto; padding: 20px 0;">
          ${actingRoles.map(movie => {
            const posterImg = movie.poster_path 
              ? `https://image.tmdb.org/t/p/w185${movie.poster_path}` 
              : '/api/placeholder/185/278';
            
            return `
              <div class="movie-card" onclick="showMovieDetails(${movie.id})">
                <img src="${posterImg}" alt="${movie.title}">
                <h3>${movie.title}</h3>
                <p>${movie.character || 'Unknown Role'} (${movie.release_date ? movie.release_date.split('-')[0] : 'TBA'})</p>
              </div>
            `;
          }).join('')}
        </div>
      </div>
    `;
  }
  
  if (directingRoles.length > 0) {
    filmographyHTML += `
      <div class="details-section">
        <h3 class="crew-title">Directing</h3>
        <div class="category-carousel" style="overflow-x: auto; padding: 20px 0;">
          ${directingRoles.map(movie => {
            const posterImg = movie.poster_path 
              ? `https://image.tmdb.org/t/p/w185${movie.poster_path}` 
              : '/api/placeholder/185/278';
            
            return `
              <div class="movie-card" onclick="showMovieDetails(${movie.id})">
                <img src="${posterImg}" alt="${movie.title}">
                <h3>${movie.title}</h3>
                <p>Director (${movie.release_date ? movie.release_date.split('-')[0] : 'TBA'})</p>
              </div>
            `;
          }).join('')}
        </div>
      </div>
    `;
  }
  
  details.innerHTML = `
    <h2>${person.name}</h2>
    <div class="details-flex">
      <div class="poster-container">
        <img src="${profileUrl}" alt="${person.name}">
      </div>
      <div class="info-container">
        <p><strong>Born:</strong> ${person.birthday || 'Unknown'}</p>
        ${person.deathday ? `<p><strong>Died:</strong> ${person.deathday}</p>` : ''}
        <p><strong>Known For:</strong> ${person.known_for_department || 'Acting'}</p>
        <p>${person.biography || 'No biography available.'}</p>
      </div>
    </div>
    ${filmographyHTML}
  `;
  
   
  document.getElementById('movie-details').style.backgroundImage = 'linear-gradient(rgba(0, 0, 0, 0.85), rgba(0, 0, 0, 0.85))';
  document.getElementById('movie-details').style.backgroundSize = "cover";
  document.getElementById('movie-details').style.backgroundPosition = "center";
}
function displayPlaceholderPersonDetails(personName) {
  document.getElementById('main-content').style.display = 'none';
  document.getElementById('search-results-page').style.display = 'none';
  document.getElementById('movie-details').style.display = 'block';

  const details = document.getElementById('details-content');
  
  details.innerHTML = `
    <h2>${personName}</h2>
    <div class="details-flex">
      <div class="poster-container">
        <img src="/api/placeholder/400/600" alt="${personName}">
      </div>
      <div class="info-container">
        <p><strong>Born:</strong> Unknown</p>
        <p><strong>Known For:</strong> Acting</p>
        <p>No biography available. This is placeholder information shown when API data cannot be retrieved.</p>
      </div>
    </div>
    <div class="details-section">
      <h3 class="crew-title">Filmography</h3>
      <p>Filmography information is currently unavailable.</p>
    </div>
  `;
  
  document.getElementById('movie-details').style.backgroundImage = 'linear-gradient(rgba(0, 0, 0, 0.85), rgba(0, 0, 0, 0.85))';
}

function addFavoriteFunctionality(movieCard, movieId, movieTitle, posterPath) {
  const currentUser = JSON.parse(localStorage.getItem('currentUser'));
  const favButton = document.createElement('button');
  favButton.className = 'favorite-btn';
  
  
  let isFavorite = false;
  if (currentUser && currentUser.favorites) {
    isFavorite = currentUser.favorites.some(fav => fav.id === movieId);
  }
  
  
  favButton.innerHTML = isFavorite ? '‚ù§Ô∏è' : 'ü§ç';
  favButton.style.position = 'absolute';
  favButton.style.top = '10px';
  favButton.style.right = '10px';
  favButton.style.background = 'rgba(0,0,0,0.5)';
  favButton.style.border = 'none';
  favButton.style.borderRadius = '50%';
  favButton.style.padding = '8px';
  favButton.style.cursor = 'pointer';
  
  favButton.addEventListener('click', (e) => {
    e.stopPropagation(); 
    
    if (!currentUser) {
      
      loginModal.style.display = 'block';
      return;
    }
    
    toggleFavorite(movieId, movieTitle, posterPath);
    isFavorite = !isFavorite;
    favButton.innerHTML = isFavorite ? '‚ù§Ô∏è' : 'ü§ç';
  });
  
  movieCard.appendChild(favButton);
}

function toggleFavorite(movieId, movieTitle, posterPath) {
  const currentUser = JSON.parse(localStorage.getItem('currentUser'));
  if (!currentUser) return;
  
  
  let users = JSON.parse(localStorage.getItem('users')) || [];
  const userIndex = users.findIndex(user => user.id === currentUser.id);
  
  if (userIndex === -1) return;
  
  
  const favIndex = currentUser.favorites.findIndex(fav => fav.id === movieId);
  
  if (favIndex !== -1) {
    
    currentUser.favorites.splice(favIndex, 1);
  } else {
    
    currentUser.favorites.push({
      id: movieId,
      title: movieTitle,
      poster_path: posterPath,
      dateAdded: new Date().toISOString()
    });
  }
  

  localStorage.setItem('currentUser', JSON.stringify(currentUser));
  users[userIndex] = currentUser;
  localStorage.setItem('users', JSON.stringify(users));
  
  
  showToast(favIndex !== -1 ? 'Removed from favorites' : 'Added to favorites');
}

function displayFavoritesPage() {
  const currentUser = JSON.parse(localStorage.getItem('currentUser'));
  
  if (!currentUser) {
    
    loginModal.style.display = 'block';
    return;
  }
  
  document.getElementById('main-content').style.display = 'none';
  document.getElementById('search-results-page').style.display = 'none';
  document.getElementById('movie-details').style.display = 'none';
  document.getElementById('favorites-page').style.display = 'block';
  
  const container = document.getElementById('favorites-container');
  container.innerHTML = '<h2>My Favorites</h2>';
  
  if (!currentUser.favorites || currentUser.favorites.length === 0) {
    container.innerHTML += '<p>You haven\'t added any favorites yet.</p>';
    return;
  }
  
  const moviesGrid = document.createElement('div');
  moviesGrid.className = 'movies-grid';
  
  currentUser.favorites.forEach(movie => {
    const card = document.createElement('div');
    card.className = 'movie-card';
    
    const posterUrl = movie.poster_path.startsWith('http') 
      ? movie.poster_path 
      : `https://image.tmdb.org/t/p/w500${movie.poster_path}`;
    
    card.innerHTML = `
      <div class="fav-card-actions">
        <button class="remove-fav" data-id="${movie.id}">√ó</button>
      </div>
      <img src="${posterUrl}" alt="${movie.title}">
      <h3>${movie.title}</h3>
      <p>Added on: ${new Date(movie.dateAdded).toLocaleDateString()}</p>
    `;
    
    card.querySelector('img').addEventListener('click', () => showMovieDetails(movie.id));
    card.querySelector('.remove-fav').addEventListener('click', (e) => {
      e.stopPropagation();
      toggleFavorite(movie.id);
      displayFavoritesPage(); 
    });
    
    moviesGrid.appendChild(card);
  });
  
  container.appendChild(moviesGrid);
}


if (!localStorage.getItem('reviews')) {
  localStorage.setItem('reviews', JSON.stringify({}));
}

function addRatingAndReviewSection(movie, movieId) {
  const currentUser = JSON.parse(localStorage.getItem('currentUser'));
  const reviews = JSON.parse(localStorage.getItem('reviews')) || {};
  const movieReviews = reviews[movieId] || [];
  
  
  let averageRating = 0;
  if (movieReviews.length > 0) {
    const sum = movieReviews.reduce((total, review) => total + review.rating, 0);
    averageRating = sum / movieReviews.length;
  }
  
  
  const tmdbRating = movie.vote_average ? (movie.vote_average / 2) : 0; 
  
  let ratingHTML = `
    <div class="ratings-section">
      <h3>Ratings</h3>
      <div class="ratings-container">
        <div class="tmdb-rating">
          <strong>TMDB Rating:</strong> ${tmdbRating.toFixed(1)}/5 (${movie.vote_count || 0} votes)
        </div>
        <div class="user-rating">
          <strong>User Rating:</strong> ${averageRating.toFixed(1)}/5 (${movieReviews.length} reviews)
        </div>
      </div>
    </div>
  `;
  
  let reviewFormHTML = '';
  if (currentUser) {

    const userReview = movieReviews.find(review => review.userId === currentUser.id);
    
    reviewFormHTML = `
      <div class="review-form">
        <h3>${userReview ? 'Edit Your Review' : 'Add Your Review'}</h3>
        <div class="star-rating">
          <span class="star" data-rating="1">‚òÜ</span>
          <span class="star" data-rating="2">‚òÜ</span>
          <span class="star" data-rating="3">‚òÜ</span>
          <span class="star" data-rating="4">‚òÜ</span>
          <span class="star" data-rating="5">‚òÜ</span>
          <span class="rating-value">${userReview ? userReview.rating : 0}/5</span>
        </div>
        <textarea id="review-text" placeholder="Write your review...">${userReview ? userReview.text : ''}</textarea>
        <button id="submit-review" class="auth-btn">Submit Review</button>
        ${userReview ? '<button id="delete-review" class="delete-btn">Delete Review</button>' : ''}
      </div>
    `;
  } else {
    reviewFormHTML = `
      <div class="login-prompt">
        <p>Please <a href="#" id="review-login-link">login</a> to leave a review.</p>
      </div>
    `;
  }
  
  let reviewsListHTML = '';
  if (currentUser && movieReviews.length > 0) {
    reviewsListHTML = `
      <div class="reviews-list">
        <h3>User Reviews (${movieReviews.length})</h3>
        <div class="reviews-container">
          ${movieReviews.map(review => {
            
            const users = JSON.parse(localStorage.getItem('users')) || [];
            const reviewer = users.find(user => user.id === review.userId) || {name: 'Unknown User'};
            
            return `
              <div class="review">
                <div class="review-header">
                  <span class="reviewer-name">${reviewer.name}</span>
                  <span class="review-rating">
                    ${'‚òÖ'.repeat(review.rating)}${'‚òÜ'.repeat(5-review.rating)}
                  </span>
                  <span class="review-date">${new Date(review.date).toLocaleDateString()}</span>
                </div>
                <div class="review-content">${review.text}</div>
              </div>
            `;
          }).join('')}
        </div>
      </div>
    `;
  } else if (!currentUser && movieReviews.length > 0) {
    reviewsListHTML = `
      <div class="reviews-list">
        <h3>User Reviews (${movieReviews.length})</h3>
        <p>Please <a href="#" id="see-reviews-login-link">login</a> to see reviews.</p>
      </div>
    `;
  }
  
  
  return `
    <div class="section-divider"></div>
    <div class="reviews-section">
      ${ratingHTML}
      ${reviewFormHTML}
      ${reviewsListHTML}
    </div>
  `;
}

function setupReviewFunctionality(movieId) {
  const currentUser = JSON.parse(localStorage.getItem('currentUser'));
  
  
  const stars = document.querySelectorAll('.star');
  let selectedRating = 0;
  
  stars.forEach(star => {

    const reviews = JSON.parse(localStorage.getItem('reviews')) || {};
    const movieReviews = reviews[movieId] || [];
    const userReview = currentUser && movieReviews.find(review => review.userId === currentUser.id);
    
    if (userReview) {
      if (parseInt(star.dataset.rating) <= userReview.rating) {
        star.textContent = '‚òÖ';
        selectedRating = userReview.rating;
      }
    }
    
    star.addEventListener('click', () => {
      selectedRating = parseInt(star.dataset.rating);
      
      
      stars.forEach(s => {
        s.textContent = parseInt(s.dataset.rating) <= selectedRating ? '‚òÖ' : '‚òÜ';
      });
      
      document.querySelector('.rating-value').textContent = `${selectedRating}/5`;
    });
    
    
    star.addEventListener('mouseover', () => {
      stars.forEach(s => {
        s.textContent = parseInt(s.dataset.rating) <= parseInt(star.dataset.rating) ? '‚òÖ' : '‚òÜ';
      });
    });
    
    star.addEventListener('mouseout', () => {
      stars.forEach(s => {
        s.textContent = parseInt(s.dataset.rating) <= selectedRating ? '‚òÖ' : '‚òÜ';
      });
    });
  });
  
  
  const reviewLoginLink = document.getElementById('review-login-link');
  if (reviewLoginLink) {
    reviewLoginLink.addEventListener('click', (e) => {
      e.preventDefault();
      loginModal.style.display = 'block';
    });
  }
  
  const seeReviewsLoginLink = document.getElementById('see-reviews-login-link');
  if (seeReviewsLoginLink) {
    seeReviewsLoginLink.addEventListener('click', (e) => {
      e.preventDefault();
      loginModal.style.display = 'block';
    });
  }
  

  const submitButton = document.getElementById('submit-review');
  if (submitButton) {
    submitButton.addEventListener('click', () => {
      if (!selectedRating) {
        showToast('Please select a rating');
        return;
      }
      
      const reviewText = document.getElementById('review-text').value.trim();
      if (!reviewText) {
        showToast('Please write a review');
        return;
      }
      
      saveReview(movieId, selectedRating, reviewText);
      showToast('Review submitted successfully');
      

      showMovieDetails(movieId);
    });
  }
  
  
  const deleteButton = document.getElementById('delete-review');
  if (deleteButton) {
    deleteButton.addEventListener('click', () => {
      deleteReview(movieId);
      showToast('Review deleted');
      showMovieDetails(movieId);
    });
  }
}

function saveReview(movieId, rating, text) {
  const currentUser = JSON.parse(localStorage.getItem('currentUser'));
  if (!currentUser) return;
  
  const reviews = JSON.parse(localStorage.getItem('reviews')) || {};
  
  
  if (!reviews[movieId]) {
    reviews[movieId] = [];
  }
  
  
  const reviewIndex = reviews[movieId].findIndex(review => review.userId === currentUser.id);
  
  const reviewData = {
    userId: currentUser.id,
    rating: rating,
    text: text,
    date: new Date().toISOString()
  };
  
  if (reviewIndex !== -1) {
    
    reviews[movieId][reviewIndex] = reviewData;
  } else {
    
    reviews[movieId].push(reviewData);
  }
  
  localStorage.setItem('reviews', JSON.stringify(reviews));
}

function deleteReview(movieId) {
  const currentUser = JSON.parse(localStorage.getItem('currentUser'));
  if (!currentUser) return;
  
  const reviews = JSON.parse(localStorage.getItem('reviews')) || {};
  
  if (reviews[movieId]) {
    reviews[movieId] = reviews[movieId].filter(review => review.userId !== currentUser.id);
    localStorage.setItem('reviews', JSON.stringify(reviews));
  }
}

document.getElementById('favorites-link').addEventListener('click', (e) => {
  e.preventDefault();
  displayFavoritesPage();
});

document.getElementById('favorites-back-button').addEventListener('click', backToHome);



    
    function displayCarouselMovies() {
      movieCarousel.innerHTML = '';

      ourMovie.forEach(movie => {
        const movieContainer = document.createElement('div');
        movieContainer.classList.add('movie-carousel-item');
        movieContainer.style.textAlign = 'center';
        
        const img = document.createElement('img');
        img.src = movie.imgSrc;
        img.alt = movie.name;
        img.style.borderRadius = '10px';
        img.style.cursor = 'pointer';
        img.classList.add("design");

        const title = document.createElement('h3');
        title.textContent = movie.name;
        title.style.color = '#fff';
        title.style.marginTop = '10px';

        
        img.addEventListener('click', () => window.open(movie.link, '_blank'));

        movieContainer.appendChild(img);
        movieContainer.appendChild(title);
        movieCarousel.appendChild(movieContainer);
      });
    }

    
    prevBtn.addEventListener('click', () => {
      movieCarousel.scrollBy({ left: -2000, behavior: 'smooth' });
    });

    nextBtn.addEventListener('click', () => {
      movieCarousel.scrollBy({ left: 2000, behavior: 'smooth' });
    });

    
    function setupCategoryCarouselControls(category) {
      const prevBtn = document.querySelector(`.${category}-prev`);
      const nextBtn = document.querySelector(`.${category}-next`);
      const carousel = document.getElementById(`${category}-movies-container`);
      
      prevBtn.addEventListener('click', () => {
        carousel.scrollBy({ left: -1000, behavior: 'smooth' });
      });
      
      nextBtn.addEventListener('click', () => {
        carousel.scrollBy({ left: 1000, behavior: 'smooth' });
      });
    }

    
    function fetchTrendingMovies() {
      fetch(`https://api.themoviedb.org/3/trending/movie/week?api_key=${apiKey}`)
        .then(response => response.json())
        .then(data => {
          displayMovies(data.results);
          displayCarouselMovies(); 
        })
        .catch(error => {
          console.error('Error fetching trending movies:', error);
          
          displayPlaceholderMovies();
          displayCarouselMovies();
        });
    }

    
    function fetchChristmasMovies() {
      fetch(`https://api.themoviedb.org/3/discover/movie?api_key=${apiKey}&with_keywords=207317&sort_by=popularity.desc`)
        .then(response => response.json())
        .then(data => {
          displayCategoryMovies(data.results, 'christmas-movies-container');
        })
        .catch(error => {
          console.error('Error fetching Christmas movies:', error);
          displayPlaceholderCategoryMovies('christmas-movies-container', 'Christmas');
        });
    }

   
function fetchActionMovies() {
  fetch(`https://api.themoviedb.org/3/discover/movie?api_key=${apiKey}&with_genres=28&sort_by=popularity.desc`)
    .then(response => response.json())
    .then(data => {
      displayCategoryMovies(data.results, 'action-movies-container');
    })
    .catch(error => {
      console.error('Error fetching Action movies:', error);
      displayPlaceholderCategoryMovies('action-movies-container', 'Action');
    });
}


function fetchHorrorMovies() {
  fetch(`https://api.themoviedb.org/3/discover/movie?api_key=${apiKey}&with_genres=27&sort_by=popularity.desc`)
    .then(response => response.json())
    .then(data => {
      displayCategoryMovies(data.results, 'horror-movies-container');
    })
    .catch(error => {
      console.error('Error fetching Horror movies:', error);
      displayPlaceholderCategoryMovies('horror-movies-container', 'Horror');
    });
}

    
    function fetchRomanticMovies() {
      fetch(`https://api.themoviedb.org/3/discover/movie?api_key=${apiKey}&with_genres=10749&sort_by=popularity.desc`)
        .then(response => response.json())
        .then(data => {
          displayCategoryMovies(data.results, 'romantic-movies-container');
        })
        .catch(error => {
          console.error('Error fetching Romantic movies:', error);
          displayPlaceholderCategoryMovies('romantic-movies-container', 'Romantic');
        });
    }

    
    function fetchBollywoodMovies() {
      fetch(`https://api.themoviedb.org/3/discover/movie?api_key=${apiKey}&with_original_language=hi&sort_by=popularity.desc`)
        .then(response => response.json())
        .then(data => {
          displayCategoryMovies(data.results, 'bollywood-movies-container');
        })
        .catch(error => {
          console.error('Error fetching Bollywood movies:', error);
          displayPlaceholderCategoryMovies('bollywood-movies-container', 'Bollywood');
        });
    }

    function displayPlaceholderMovies() {
      const container = document.getElementById('movies-container');
      container.innerHTML = '';
      
      const placeholderMovies = [
        { title: "The Avengers", id: 1 },
        { title: "Inception", id: 2 },
        { title: "The Dark Knight", id: 3 },
        { title: "Pulp Fiction", id: 4 },
        { title: "Forrest Gump", id: 5 },
        { title: "The Matrix", id: 6 }
      ];
      
      placeholderMovies.forEach(movie => {
        const card = document.createElement('div');
        card.classList.add('movie-card');
        card.innerHTML = `
          <img src="/api/placeholder/400/320" alt="${movie.title}">
          <h3>${movie.title}</h3>
        `;
        card.addEventListener('click', () => showPlaceholderMovieDetails(movie));
        container.appendChild(card);
      });
    }

    function displayPlaceholderCategoryMovies(containerId, category) {
      const container = document.getElementById(containerId);
      container.innerHTML = '';
      
      const movies = [
        { title: `${category} Movie 1`, id: 101 },
        { title: `${category} Movie 2`, id: 102 },
        { title: `${category} Movie 3`, id: 103 },
        { title: `${category} Movie 4`, id: 104 },
        { title: `${category} Movie 5`, id: 105 },
        { title: `${category} Movie 6`, id: 106 },
        { title: `${category} Movie 7`, id: 107 },
        { title: `${category} Movie 8`, id: 108 }
      ];
      
      movies.forEach(movie => {
        const card = document.createElement('div');
        card.classList.add('movie-card');
        card.innerHTML = `
          <img src="/api/placeholder/400/320" alt="${movie.title}">
          <h3>${movie.title}</h3>
        `;
        card.addEventListener('click', () => showPlaceholderMovieDetails(movie));
        container.appendChild(card);
      });
    }

    function displayMovies(movies) {
      const container = document.getElementById('movies-container');
      container.innerHTML = '';

      movies.forEach(movie => {
        if (movie.poster_path) {
          const card = document.createElement('div');
          card.classList.add('movie-card');
          card.innerHTML = `
            <img src="https://image.tmdb.org/t/p/w500${movie.poster_path}" alt="${movie.title}">
            <h3>${movie.title}</h3>
          `;
          card.addEventListener('click', () => showMovieDetails(movie.id));
          container.appendChild(card);
        }
      });
    }

    function displayCategoryMovies(movies, containerId) {
      const container = document.getElementById(containerId);
      container.innerHTML = '';

      movies.forEach(movie => {
        if (movie.poster_path) {
          const card = document.createElement('div');
          card.classList.add('movie-card');
          card.innerHTML = `
            <img src="https://image.tmdb.org/t/p/w500${movie.poster_path}" alt="${movie.title}">
            <h3>${movie.title}</h3>
          `;
          card.addEventListener('click', () => showMovieDetails(movie.id));
          container.appendChild(card);
        }
      });
    }

    
function searchMovie(query) {
  
  fetch(`https://api.themoviedb.org/3/search/movie?api_key=${apiKey}&query=${encodeURIComponent(query)}`)
    .then(response => response.json())
    .then(movieData => {
      
      fetch(`https://api.themoviedb.org/3/search/person?api_key=${apiKey}&query=${encodeURIComponent(query)}`)
        .then(response => response.json())
        .then(personData => {
          
          displayCombinedSearchResults(movieData.results, personData.results);
        })
        .catch(error => {
          console.error('Error searching people:', error);
          displayCombinedSearchResults(movieData.results, []);
        });
    })
    .catch(error => {
      console.error('Error searching movies:', error);
      displayCombinedSearchResults([], []);
    });
}


function displayCombinedSearchResults(movies, people) {
  document.getElementById('main-content').style.display = 'none';
  document.getElementById('movie-details').style.display = 'none';
  document.getElementById('search-results-page').style.display = 'block';

  const container = document.getElementById('search-movies-container');
  container.innerHTML = '';

  if (movies.length === 0 && people.length === 0) {
    container.innerHTML = '<p>No results found.</p>';
    return;
  }

  
  if (movies.length > 0) {
    const movieSection = document.createElement('div');
    movieSection.innerHTML = `<h3 class="section-heading">Movies</h3>`;
    container.appendChild(movieSection);

    const movieContainer = document.createElement('div');
    movieContainer.classList.add('category-container');
    
    movies.forEach(movie => {
      if (movie.poster_path) {
        const card = document.createElement('div');
        card.classList.add('movie-card');
        card.innerHTML = `
          <img src="https://image.tmdb.org/t/p/w500${movie.poster_path}" alt="${movie.title}">
          <h3>${movie.title}</h3>
        `;
        card.addEventListener('click', () => showMovieDetails(movie.id));
        movieContainer.appendChild(card);
      }
    });
    
    container.appendChild(movieContainer);
  }

  
  if (people.length > 0) {
    const peopleSection = document.createElement('div');
    peopleSection.innerHTML = `
      <div class="section-divider"></div>
      <h3 class="section-heading">Cast & Crew</h3>
    `;
    container.appendChild(peopleSection);

    const peopleContainer = document.createElement('div');
    peopleContainer.classList.add('cast-container');
    
    people.forEach(person => {
      const card = document.createElement('div');
      card.classList.add('cast-member');
      const profileImg = person.profile_path 
        ? `https://image.tmdb.org/t/p/w185${person.profile_path}` 
        : '/api/placeholder/150/150';
      
      card.innerHTML = `
        <img src="${profileImg}" alt="${person.name}">
        <p class="cast-name">${person.name}</p>
        <p class="cast-character">${person.known_for_department || 'Actor'}</p>
      `;
      card.addEventListener('click', () => showPersonDetails(person.id, person.name));
      peopleContainer.appendChild(card);
    });
    
    container.appendChild(peopleContainer);
  }
}

    
    function showMovieDetails(movieId) {
      
      fetch(`https://api.themoviedb.org/3/movie/${movieId}?api_key=${apiKey}`)
        .then(response => response.json())
        .then(movie => {
        
          fetch(`https://api.themoviedb.org/3/movie/${movieId}/credits?api_key=${apiKey}`)
            .then(response => response.json())
            .then(credits => {
              displayMovieDetailsWithCredits(movie, credits);
            })
            .catch(error => {
              console.error('Error fetching movie credits:', error);
              displayMovieDetailsWithCredits(movie, { cast: [], crew: [] });
            });
        })
        .catch(error => console.error('Error fetching movie details:', error));
    }
    
    function showPlaceholderMovieDetails(movie) {
      const placeholderMovie = {
        title: movie.title,
        release_date: "2025-01-01",
        overview: "This is a placeholder description for the movie. In a world where API keys may not always work, placeholder content comes to the rescue.",
        poster_path: "/api/placeholder/400/320"
      };
      
      const placeholderCredits = {
        cast: [
          { 
            name: "John Doe", 
            character: "Main Character",
            profile_path: null
          },
          { 
            name: "Jane Smith", 
            character: "Supporting Role",
            profile_path: null
          },
          { 
            name: "Chris Johnson", 
            character: "Villain",
            profile_path: null
          }
        ],
        crew: [
          {
            name: "Steven Spielberg",
            job: "Director",
            profile_path: null
          },
          {
            name: "Hans Zimmer",
            job: "Music Composer",
            profile_path: null
          }
        ]
      };

     
      
      displayMovieDetailsWithCredits(placeholderMovie, placeholderCredits);
    }
    
    function displayMovieDetailsWithCredits(movie, credits) {
      document.getElementById('main-content').style.display = 'none';
      document.getElementById('search-results-page').style.display = 'none';
      document.getElementById('movie-details').style.display = 'block';

      

      const details = document.getElementById('details-content');
      const posterUrl = movie.poster_path && movie.poster_path.startsWith('/api/') 
        ? movie.poster_path 
        : `https://image.tmdb.org/t/p/w500${movie.poster_path}`;
      
      
      const directors = credits.crew ? credits.crew.filter(person => person.job === "Director") : [];
      
      
      const topCast = credits.cast ? credits.cast.slice(0, 12) : [];
      
      let directorsHTML = '';
if (directors.length > 0) {
  directorsHTML = `
    <div class="crew-container">
      <h3 class="crew-title">Directed by</h3>
      ${directors.map(director => {
        const profileImg = director.profile_path 
          ? `https://image.tmdb.org/t/p/w185${director.profile_path}` 
          : '/api/placeholder/150/150';
        
        return `
          <div class="crew-member" onclick="showPersonDetails(${director.id}, '${director.name.replace(/'/g, "\\'")}')" style="cursor: pointer;">
            <img src="${profileImg}" alt="${director.name}" style="width: 60px; height: 60px; object-fit: cover; border-radius: 50%;">
            <div class="crew-info">
              <p class="crew-name">${director.name}</p>
              <p class="crew-job">Director</p>
            </div>
          </div>
        `;
      }).join('')}
    </div>
  `;
}


  
  let castHTML = '';
  if (topCast.length > 0) {
    castHTML = `
      <div class="details-section">
        <h3 class="crew-title">Top Cast</h3>
        <div class="cast-container">
          ${topCast.map(actor => {
            const profileImg = actor.profile_path 
              ? `https://image.tmdb.org/t/p/w185${actor.profile_path}` 
              : '/api/placeholder/150/150';
            
            return `
              <div class="cast-member" onclick="showPersonDetails(${actor.id}, '${actor.name.replace(/'/g, "\\'")}')" style="cursor: pointer;">
                <img src="${profileImg}" alt="${actor.name}">
                <p class="cast-name">${actor.name}</p>
                <p class="cast-character">${actor.character || 'Unknown Role'}</p>
              </div>
            `;
          }).join('')}
        </div>
      </div>
    `;
  }
      
      details.innerHTML = `
        <h2>${movie.title}</h2>
        <div class="details-flex">
          <div class="poster-container">
            <img src="${posterUrl}" alt="${movie.title}">
          </div>
          <div class="info-container">
            <p><strong>Release Date:</strong> ${movie.release_date}</p>
            <p>${movie.overview}</p>
            ${directorsHTML}
          </div>
        </div>
        ${castHTML}
      `;

     
      
      
      const bgUrl = movie.backdrop_path 
        ? `https://image.tmdb.org/t/p/original${movie.backdrop_path}` 
        : posterUrl;
      
      document.getElementById('movie-details').style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.85), rgba(0, 0, 0, 0.85)), url(${bgUrl})`;
      document.getElementById('movie-details').style.backgroundSize = "cover";
      document.getElementById('movie-details').style.backgroundPosition = "center";
      document.getElementById('movie-details').style.backdropFilter = 'blur(10px)';

      const ratingsAndReviewsHTML = addRatingAndReviewSection(movie, movie.id);
  
  details.innerHTML = `
    <h2>${movie.title}</h2>
    <div class="details-flex">
      <div class="poster-container">
        <img src="${posterUrl}" alt="${movie.title}">
      </div>
      <div class="info-container">
        <p><strong>Release Date:</strong> ${movie.release_date}</p>
        <p><strong>Rating:</strong> ${movie.vote_average ? movie.vote_average.toFixed(1) : 'N/A'}/10</p>
        <p>${movie.overview}</p>
        ${directorsHTML}
      </div>
    </div>
    ${castHTML}
    ${ratingsAndReviewsHTML}
  `;
  
  
  setupReviewFunctionality(movie.id);

  fetchAndDisplaySimilarMovies(movie.id, details);
  

}
  
  

function showToast(message, duration = 3000) {
  
  const existingToast = document.querySelector('.toast');
  if (existingToast) {
    existingToast.remove();
  }
  
  
  const toast = document.createElement('div');
  toast.className = 'toast';
  toast.textContent = message;
  document.body.appendChild(toast);
  
  
  void toast.offsetWidth;
  
  
  toast.classList.add('show');
  
  
  setTimeout(() => {
    toast.classList.remove('show');
    setTimeout(() => {
      toast.remove();
    }, 300);
  }, duration);
}

    

    
    function backToHome() {
      document.getElementById('main-content').style.display = 'block';
      document.getElementById('movie-details').style.display = 'none';
      document.getElementById('search-results-page').style.display = 'none';
    }

    
    document.addEventListener('DOMContentLoaded', () => {
      
      document.getElementById('intro-instructions').style.display = 'block';
      
      
      document.addEventListener('keydown', function(event) {
        if (event.key === 'Enter') {
          const intro = document.getElementById('intro');
          const instructions = document.getElementById('intro-instructions');
          
          intro.style.opacity = '0';
          instructions.style.opacity = '0';
          intro.style.transition = 'opacity 1s ease';
          instructions.style.transition = 'opacity 1s ease';
          
          setTimeout(() => {
            intro.style.display = 'none';
            instructions.style.display = 'none';
            document.getElementById('main-content').style.display = 'block';
          }, 1000);
        }
      });
      
      
      fetchTrendingMovies();
      fetchChristmasMovies();
      fetchActionMovies();
      fetchHorrorMovies();
      fetchRomanticMovies();
      fetchBollywoodMovies();
      
      
      setupCategoryCarouselControls('christmas');
      setupCategoryCarouselControls('action');
      setupCategoryCarouselControls('horror');
      setupCategoryCarouselControls('romantic');
      setupCategoryCarouselControls('bollywood');

      
      document.getElementById('search-button').addEventListener('click', () => {
        const query = document.getElementById('search').value.trim();
        if (query.length > 2) {  
          searchMovie(query);
        }
      });
      
      
      document.getElementById('search').addEventListener('keypress', (event) => {
        if (event.key === 'Enter') {
          const query = document.getElementById('search').value.trim();
          if (query.length > 2) {
            searchMovie(query);
          }
        }
      });
      
      document.getElementById('back-button').addEventListener('click', backToHome);
      document.getElementById('details-back-button').addEventListener('click', backToHome);
    });

    
const loginModal = document.getElementById('login-modal');
const signupModal = document.getElementById('signup-modal');
const loginButton = document.getElementById('login-button');
const signupButton = document.getElementById('signup-button');
const userProfile = document.getElementById('user-profile');
const userAvatar = document.getElementById('user-avatar');
const username = document.getElementById('username');
const userDropdown = document.getElementById('user-dropdown');
const logoutLink = document.getElementById('logout-link');
const authButtons = document.getElementById('auth-buttons');
const showSignup = document.getElementById('show-signup');
const showLogin = document.getElementById('show-login');
const closeBtns = document.getElementsByClassName('close-btn');


const loginForm = document.getElementById('login-form');
const signupForm = document.getElementById('signup-form');


function checkAuthStatus() {
  const currentUser = JSON.parse(localStorage.getItem('currentUser'));
  if (currentUser) {
    authButtons.style.display = 'none';
    userProfile.style.display = 'flex';
    username.textContent = currentUser.name;
    userAvatar.textContent = currentUser.name.charAt(0).toUpperCase();
  } else {
    authButtons.style.display = 'block';
    userProfile.style.display = 'none';
  }
}


loginButton.addEventListener('click', () => {
  loginModal.style.display = 'block';
});


signupButton.addEventListener('click', () => {
  signupModal.style.display = 'block';
});


for (let i = 0; i < closeBtns.length; i++) {
  closeBtns[i].addEventListener('click', function() {
    loginModal.style.display = 'none';
    signupModal.style.display = 'none';
  });
}


window.addEventListener('click', (event) => {
  if (event.target === loginModal) {
    loginModal.style.display = 'none';
  }
  if (event.target === signupModal) {
    signupModal.style.display = 'none';
  }
});


showSignup.addEventListener('click', (e) => {
  e.preventDefault();
  loginModal.style.display = 'none';
  signupModal.style.display = 'block';
});

showLogin.addEventListener('click', (e) => {
  e.preventDefault();
  signupModal.style.display = 'none';
  loginModal.style.display = 'block';
});


userProfile.addEventListener('click', () => {
  userDropdown.classList.toggle('show');
});


window.addEventListener('click', (event) => {
  if (!event.target.matches('.user-profile') && 
      !event.target.matches('#username') && 
      !event.target.matches('#user-avatar')) {
    if (userDropdown.classList.contains('show')) {
      userDropdown.classList.remove('show');
    }
  }
});


signupForm.addEventListener('submit', (e) => {
  e.preventDefault();
  
  
  const name = document.getElementById('signup-name').value;
  const email = document.getElementById('signup-email').value;
  const password = document.getElementById('signup-password').value;
  const confirmPassword = document.getElementById('signup-confirm').value;
  
  
  const errorElements = document.querySelectorAll('.validation-error');
  errorElements.forEach(element => element.remove());
  
  
  if (password !== confirmPassword) {
    const errorDiv = document.createElement('div');
    errorDiv.className = 'validation-error';
    errorDiv.textContent = 'Passwords do not match';
    document.getElementById('signup-confirm').parentNode.appendChild(errorDiv);
    return;
  }
  
  
  let users = JSON.parse(localStorage.getItem('users')) || [];
  
  
  if (users.some(user => user.email === email)) {
    const errorDiv = document.createElement('div');
    errorDiv.className = 'validation-error';
    errorDiv.textContent = 'Email already in use';
    document.getElementById('signup-email').parentNode.appendChild(errorDiv);
    return;
  }
  

  const newUser = {
    id: Date.now().toString(),
    name,
    email,
    password, 
    favorites: []
  };
  
  
  users.push(newUser);
  
  
  localStorage.setItem('users', JSON.stringify(users));
  
  
  localStorage.setItem('currentUser', JSON.stringify(newUser));
  
  
  signupModal.style.display = 'none';
  checkAuthStatus();
  
  
  signupForm.reset();
});


loginForm.addEventListener('submit', (e) => {
  e.preventDefault();
  
  
  const email = document.getElementById('login-email').value;
  const password = document.getElementById('login-password').value;
  
  
  const errorElements = document.querySelectorAll('.validation-error');
  errorElements.forEach(element => element.remove());
  
  
  const users = JSON.parse(localStorage.getItem('users')) || [];
  
  
  const user = users.find(user => user.email === email && user.password === password);
  
  if (user) {
    
    localStorage.setItem('currentUser', JSON.stringify(user));
    
    
    loginModal.style.display = 'none';
    checkAuthStatus();
    
    
    loginForm.reset();
  } else {
    
    const errorDiv = document.createElement('div');
    errorDiv.className = 'validation-error';
    errorDiv.textContent = 'Invalid email or password';
    loginForm.appendChild(errorDiv);
  }
});


logoutLink.addEventListener('click', (e) => {
  e.preventDefault();
  
  
  localStorage.removeItem('currentUser');
  
  
  userDropdown.classList.remove('show');
  checkAuthStatus();
});


document.getElementById('favorites-link').addEventListener('click', (e) => {
  e.preventDefault();
  
  alert('Favorites feature coming soon!');
});


document.getElementById('profile-link').addEventListener('click', (e) => {
  e.preventDefault();
  
  alert('Profile feature coming soon!');
});

document.addEventListener('DOMContentLoaded', () => {

  
  
  checkAuthStatus();
});
  </script>
</body>
</html>